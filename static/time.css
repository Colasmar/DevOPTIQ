/* Code/static/time.css — v3.1.3
   - Faiblesse compact + alignements
   - Fonds 100% blancs
   - Contours généraux 2px ; Faiblesse x1.5 (=3px)
*/

:root{
  --bg:#f6fbf6;
  --card:#ffffff;
  --ink:#122a0f;
  --muted:#5b6b65;

  /* verts */
  --emerald-50:#ecfdee;
  --emerald-100:#d1fad4;
  --emerald-200:#b3f0bc;
  --emerald-500:#16b910;
  --emerald-600:#059629;

  /* roses */
  --rose-50:#fff0fb;
  --rose-100:#ffe0f7;
  --rose-200:#ffc9f0;
  --rose-500:#ff3db0;
  --rose-600:#e51f95;

  --red-500:#ef4444;

  --border:#0f2a11;
  --border-soft:#93c5aa;
}

*{ box-sizing:border-box; }
html,body{ width:100%; }
body{
  background:var(--bg);
  color:var(--ink);
  font-family:Inter, system-ui, -apple-system,"Segoe UI", Roboto, Arial, sans-serif;
}

h1{ font-weight:700; font-size:26px; margin:16px 0 12px; letter-spacing:.2px; }
h2{ font-weight:700; font-size:18px; margin:0 0 10px; }
h3{ font-weight:800; font-size:15px; margin:6px 0 8px; }
.title-xl{ font-size:20px; font-weight:900; margin:0; }
.container{ max-width:1200px; margin:0 auto; padding:14px; }

.tabs, .subtabs{ display:flex; gap:8px; margin:6px 0 14px; flex-wrap:wrap; }
.tab, .subtab{
  border:1px solid var(--border-soft); background:#fff; padding:7px 12px; border-radius:999px; cursor:pointer;
  color:#0b3d2e; font-weight:800; box-shadow:0 2px 6px rgba(0,0,0,.03);
}
.tab.active{ background:#fff; border-color:var(--rose-500); color:#711a50; }
.subtab.active{ background:#fff; border-color:var(--emerald-500); color:#064e3b; }

.tab-panel{ display:none; }
.tab-panel.active{ display:block; }
.subtab-panel{ display:none; }
.subtab-panel.active{ display:block; }

/* Cartes */
.card{
  background:#fff;
  border:1px solid var(--border-soft);
  border-radius:14px;
  padding:12px;
  box-shadow:0 8px 22px rgba(15,23,42,.06);
  overflow:hidden;
}
.card-head{ display:flex; align-items:center; gap:10px; margin-bottom:8px; }

/* Sous-cartes (sections internes) */
.subcard{
  background:#fff;
  border:1px solid var(--border-soft);
  border-radius:12px;
  padding:8px 12px 12px;          /* ↓ moins d’air au-dessus */
  margin-top:4px;
  overflow:hidden;
}
.subcard h3{
  margin:2px 0 6px 0;             /* ↓ colle le titre au contenu */
  line-height:1.25;
}

/* Accent FAIBLESSE — bordures x1.5 (=3px) */
#subtab-faiblesse .card{ border-color:#f0a8d4; border-width:3px; }
#subtab-faiblesse .subcard{ border-color:#f0a8d4; border-width:3px; }

.hidden{ display:none !important; }

/* Hints compacts */
.muted,
.field-hint,
.hint,
.help,
.subcard small,
.form-grid small{
  color:var(--muted);
  font-size:11.5px;
  line-height:1.2;
  margin-top:4px;
  display:block;
}
.subcard p.muted{ margin:4px 0 0; }

/* Formulaires */
.input, select{
  border:1px solid var(--border-soft);
  border-radius:9px;
  padding:7px 9px;
  background:#fff;
  width:100%;
  max-width:100%;
  line-height:1.2;
}
.input:focus, select:focus{
  outline:0; border-color:var(--rose-500); box-shadow:0 0 0 3px rgba(255,61,176,.14);
}
.chk{ display:flex; align-items:center; gap:6px; }

.inline{
  display:flex; gap:8px; align-items:center;
  min-width:0; flex-wrap:wrap;
}
.inline > *{ min-width:0; }

/* Couple "nombre + unité" */
.inline input[type="number"], .inline input[type="text"]{
  flex:1 1 150px; min-width:0; width:auto;
}
.inline select{
  flex:0 0 92px; max-width:92px;
}

/* Grilles formulaire */
.form-grid{
  display:grid;
  grid-template-columns: minmax(150px, 230px) 1fr;
  gap:6px 10px;
  margin-bottom:8px;
  align-items:center;
}
.form-grid > label{ align-self:center; }

/* Tableaux */
.table-wrap{ width:100%; border-radius:12px; background:#fff; overflow:auto; }
.grid{ width:100%; border-collapse:separate; border-spacing:0; margin-top:8px; }
.grid th, .grid td{
  border-top:1px solid var(--border-soft);
  border-left:1px solid var(--border-soft);
  padding:7px 9px;
  text-align:left;
  vertical-align:middle;
  white-space:normal; word-break:break-word;
}
.grid th:last-child, .grid td:last-child{ border-right:1px solid var(--border-soft); }
.grid tr:last-child td{ border-bottom:1px solid var(--border-soft); }
.grid thead th{
  background:var(--rose-50);
  font-weight:900; color:#651b49;
}
#subtab-role .grid thead th{ background:var(--emerald-100); color:#064e3b; }
.grid tbody tr:nth-child(even) td{ background:#fafbff; }

.col-activity{ width:38%; }
.col-num{ width:110px; }
.col-num-xs{ width:78px; }
.col-unit{ width:96px; }
.col-rec{ width:138px; }
.col-actions{ width:96px; }

td .input[type="number"], td select{ width:100%; max-width:100%; }

/* Actions */
.row-actions{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; align-items:center; }
.btn{
  border:1px solid var(--border-soft); background:#fff;
  padding:6px 11px; border-radius:9px; cursor:pointer;
  font-weight:900; font-size:14px;
  transition:transform .02s ease, background .15s ease, box-shadow .15s ease;
  box-shadow:0 2px 6px rgba(0,0,0,.03);
}
.btn:hover{ background:#fff8fd; box-shadow:0 4px 10px rgba(0,0,0,.06); }
.btn:active{ transform:translateY(1px); }
.btn.success{ background:#fff; color:#064e3b; border-color:#6fcf8b; }
.btn.success:hover{ background:#f1fff6; }

/* Icônes */
.icon-btn{
  border:1px solid var(--border-soft); background:#fff; padding:4px 8px; border-radius:9px; cursor:pointer; font-size:14px; line-height:1;
}
.icon-btn:hover{ background:#fff6fb; }
.icon-btn.danger{ border-color:var(--red-500); }
.icon-btn.danger:hover{ background:#ffecec; }
.icon-btn.success{ border-color:#8fd9a4; color:#065f46; }
.icon-btn.success:hover{ background:#e7f8f1; }

/* Badges — 2px */
.badge{
  display:inline-block; margin-left:8px; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:900;
  background:var(--emerald-100); color:#064e3b; border:2px solid #8fd9a4;
}

/* KPIs */
.kpis{
  display:grid; gap:10px; margin:10px 0 6px;
  grid-template-columns: repeat(4, minmax(0, 1fr));
}
@media (max-width: 980px){ .kpis{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 560px){ .kpis{ grid-template-columns: 1fr; } }

.kpi{
  border:2px solid #8fd9a4;
  border-radius:12px; padding:10px 12px;
  background:#fff;
  box-shadow:0 6px 14px rgba(15,23,42,.05);
}
.kpis-emerald-strong .kpi{ border-color:#6fcf8b; }
.kpi .label{ font-size:11px; color:#0b3d2e; font-weight:900; text-transform:uppercase; letter-spacing:.3px; }
.kpi .value{ font-size:20px; font-weight:900; display:flex; align-items:baseline; gap:6px; }
.kpi .unit{ font-size:12px; color:#0b3d2e; opacity:.75; }

/* KPIs faiblesse soft — 3px */
.kpis-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:14px; }
.kpi.soft{ background:#fff; border:3px solid #f3b5da; border-radius:12px; padding:12px 14px; }
.kpi.soft:nth-child(3n+2){ border-color:#8fd9a4; }
.kpi .hint{ margin-top:4px; font-size:11.5px; color:#6b7280; line-height:1.2; }

/* Résumé / pill (faiblesse) — 3px */
.summary-pill{
  margin-top:8px; display:inline-block; padding:6px 10px; border-radius:999px;
  background:#fff; border:3px solid #f3b5da; font-weight:900; color:#5a1240;
}

/* Accordéon */
.accordion{ display:flex; flex-direction:column; gap:10px; }
.acc-item{ border:1px solid var(--border-soft); border-radius:12px; overflow:hidden; background:#fff; }
.acc-head{
  display:flex; align-items:center; gap:10px; padding:10px 12px; background:#fff;
  cursor:pointer; border-bottom:1px solid #eef2f7;
}
.acc-title{ display:flex; align-items:center; gap:6px; font-size:14px; font-weight:900; }
.acc-meta{ margin-left:auto; font-size:12px; color:var(--muted); }
.acc-actions{ display:flex; gap:6px; margin-left:8px; }
.acc-toggle{ margin-left:8px; transform:rotate(-90deg); transition:transform .15s ease; color:var(--muted); }
.acc-item.open .acc-toggle{ transform:rotate(0deg); }
.acc-body{ display:none; padding:10px 12px; background:#fafafa; border-top:1px solid var(--border-soft); }
.acc-item.open .acc-body{ display:block; }

/* Accessibilité */
.visually-hidden{
  position:absolute !important;
  width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* ======= Faiblesse : alignements stricts & anti-overflow ======= */

/* 2 colonnes, items compacts, et éléments "structure" sur la pleine largeur */
.subcard-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:8px 20px;                           /* ← row-gap réduit (8px) */
  align-items:start;
}
.subcard-grid > h3{ grid-column:1 / -1; }
.subcard-grid .row-actions{ grid-column:1 / -1; }

/* Supprime toute marge résiduelle juste après le h3 */
.subcard-grid > h3 + *{ margin-top:0 !important; }

/* égalisation des hauteurs uniquement pour les champs */
.subcard-grid.equal{ grid-auto-rows: 1fr; }
.subcard-grid.equal .sc-field{
  display:grid;
  grid-template-rows: auto auto auto;     /* label / zone / hint */
  gap:8px;
  min-width:0;
  height:100%;
}
.subcard-grid .sc-field .inline{ align-items:center; }

/* Resserre un peu les selects d'unité côté faiblesse */
#subtab-faiblesse .inline select{ flex:0 0 86px; max-width:86px; }

/* Responsive */
@media (max-width: 980px){
  .form-grid, .subcard-grid{ grid-template-columns:1fr; grid-auto-rows:auto; }
}
