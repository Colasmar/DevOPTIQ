<!-- Code/routes/templates/activity_competencies.html -->

<h3>Compétences</h3>

<ul id="competencies-list-{{ item.activity.id }}">
  {% for comp in item.activity.competencies %}
    <li data-comp-id="{{ comp.id }}" style="margin-bottom:5px;">
      <span class="validated-skill-text">{{ comp.description }}</span>
      <button onclick="editCompetency(this, {{ comp.id }})" style="margin-left:5px;">
        <i class="fa-solid fa-pencil"></i>
      </button>
      <button onclick="deleteCompetency(this, {{ comp.id }})" style="margin-left:5px;">
        <i class="fa-solid fa-trash"></i>
      </button>
      <!-- Formulaire d'édition local (caché) -->
      <div class="edit-competency-form" id="edit-competency-form-{{ comp.id }}" style="display:none; margin-top:5px;">
        <label>Description :</label>
        <input type="text" id="edit-competency-desc-{{ comp.id }}" value="{{ comp.description }}" />
        <button onclick="submitEditCompetency('{{ comp.id }}')">Enregistrer</button>
        <button onclick="hideEditCompetencyForm('{{ comp.id }}')">Annuler</button>
      </div>
    </li>
  {% endfor %}
</ul>

<!-- Bouton pour proposer des compétences (ouvre le modal via competency_modal.html) -->
<button onclick="fetchActivityDetailsForSkills({{ item.activity.id }})">
  Proposer Compétences
</button>
