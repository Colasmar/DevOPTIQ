<script>
  function fetchActivityDetailsForSkills(activityId) {
    fetch(`/activities/${activityId}/details`)
      .then(response => response.json())
      .then(data => {
        if (data.error) {
          alert("Erreur : " + data.error);
          return;
        }
        proposeSkills(data);
      })
      .catch(error => {
        alert("Erreur lors de la récupération des données : " + error.message);
      });
  }
  
  function proposeSkills(activityData) {
    fetch('/skills/propose', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(activityData)
    })
    .then(response => response.json())
    .then(data => {
      if (data.error) {
        alert("Erreur dans la proposition: " + data.error);
        return;
      }
      showProposalsModal(data.proposals, activityData.id);
    })
    .catch(error => {
      alert("Erreur : " + error.message);
    });
  }
  </script>
  