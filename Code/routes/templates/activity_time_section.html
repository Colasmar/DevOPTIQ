<!-- Code/routes/templates/components/activity_time_section.html -->
<!-- Composant autonome, SANS CSS importé, SANS <select> d’activité.
     Il s’attache à la carte courante via data-activity-id et {{ activity.name }}. -->

<section class="activity-time" data-activity-id="{{ activity.id }}">
  <h3>Temps — {{ activity.name }}</h3>

  <fieldset>
    <legend>Mode de saisie</legend>
    <!-- radios nommés par activity.id pour éviter tout conflit entre cartes -->
    <label>
      <input type="radio" name="at-mode-{{ activity.id }}" value="activity" checked>
      Durée globale de l’activité
    </label>
    &nbsp;&nbsp;
    <label>
      <input type="radio" name="at-mode-{{ activity.id }}" value="tasks">
      Durée par tâches (la somme alimente la durée de l’activité)
    </label>
  </fieldset>

  <!-- Bloc : durée globale -->
  <fieldset class="at-global" style="margin-top:8px;">
    <legend>Durée globale + Délai</legend>

    <div>
      <label>Durée de l’activité&nbsp;:
        <input type="number" step="0.1" min="0" class="at-dur">
      </label>
      <select class="at-dur-unit">
        <option>minutes</option>
        <option>heures</option>
        <option>jours</option>
      </select>
    </div>

    <div style="margin-top:6px;">
      <label>Délai de production&nbsp;:
        <input type="number" step="0.1" min="0" class="at-del">
      </label>
      <select class="at-del-unit">
        <option>minutes</option>
        <option>heures</option>
        <option>jours</option>
      </select>
    </div>
  </fieldset>

  <!-- Bloc : par tâches -->
  <fieldset class="at-tasks" style="margin-top:8px; display:none;">
    <legend>Durées par tâches</legend>

    <table border="1" cellpadding="4" cellspacing="0" style="width:100%;">
      <thead>
        <tr>
          <th style="text-align:left;">Tâche</th>
          <th style="text-align:right;">Durée</th>
          <th style="text-align:left;">Unité</th>
        </tr>
      </thead>
      <tbody class="at-task-rows"></tbody>
      <tfoot>
        <tr>
          <td colspan="3">
            <strong>Somme des durées tâches :</strong>
            <span class="at-sum">0</span> minutes
          </td>
        </tr>
      </tfoot>
    </table>

    <div style="margin-top:6px;">
      <label>Délai de production (global)&nbsp;:
        <input type="number" step="0.1" min="0" class="at-del2">
      </label>
      <select class="at-del2-unit">
        <option>minutes</option>
        <option>heures</option>
        <option>jours</option>
      </select>
    </div>
  </fieldset>

  <div style="margin-top:8px;">
    <button type="button" class="at-save">Enregistrer</button>
    <button type="button" class="at-reset">Réinitialiser</button>
  </div>
</section>
