{% if activity.softskills and activity.softskills|length > 0 %}
  {% for softskill in activity.softskills %}
    <div class="softskill-item" style="margin-bottom:5px;" data-ss-id="{{ softskill.id }}">
      <span class="softskill-text">
        {{ softskill.habilete }} ({{ softskill.niveau }})
      </span>

      {% if softskill.justification %}
        <button onclick="toggleSoftskillJustification('{{ softskill.id }}')" style="margin-left:10px;">
          Justification
        </button>
        <div id="softskill-justif-{{ softskill.id }}"
             style="display:none; margin-top:5px; border:1px solid #ddd; padding:5px;">
          {{ softskill.justification }}
        </div>
      {% endif %}

      <i class="fas fa-pencil-alt" title="Modifier" style="margin-left:10px; cursor:pointer;"
         onclick="editSoftskill('{{ softskill.id }}')"></i>
      <i class="fas fa-trash" title="Supprimer" style="margin-left:6px; cursor:pointer;"
         onclick="deleteSoftskill('{{ softskill.id }}')"></i>

      <!-- Formulaire d'édition caché -->
      <div class="edit-softskill-form" id="edit-softskill-form-{{ softskill.id }}"
           style="display:none; margin-top:8px; border:1px solid #ccc; padding:8px;">
        <label>Habileté :</label>
        <input type="text" id="edit-softskill-name-{{ softskill.id }}"
               value="{{ softskill.habilete }}" style="width:220px;" />

        <label style="margin-left:10px;">Niveau :</label>
        <select id="edit-softskill-level-{{ softskill.id }}">
          <option value="1 (Aptitude)" {% if softskill.niveau == "1 (Aptitude)" %}selected{% endif %}>1 (Aptitude)</option>
          <option value="2 (Acquisition)" {% if softskill.niveau == "2 (Acquisition)" %}selected{% endif %}>2 (Acquisition)</option>
          <option value="3 (Maîtrise)" {% if softskill.niveau == "3 (Maîtrise)" %}selected{% endif %}>3 (Maîtrise)</option>
          <option value="4 (Excellence)" {% if softskill.niveau == "4 (Excellence)" %}selected{% endif %}>4 (Excellence)</option>
        </select>

        <div style="margin-top:6px;">
          <label>Justification :</label><br/>
          <textarea id="edit-softskill-justif-{{ softskill.id }}" rows="2" style="width:95%;">{{ softskill.justification }}</textarea>
        </div>
        <button onclick="submitEditSoftskillFromDOM('{{ softskill.id }}')" style="margin-top:8px;">
          Enregistrer
        </button>
        <button onclick="hideEditSoftskillForm('{{ softskill.id }}')" style="margin-top:8px;">
          Annuler
        </button>
      </div>
    </div>
  {% endfor %}
{% else %}
  <p>Aucune habileté socio-cognitive n'est enregistrée.</p>
{% endif %}
